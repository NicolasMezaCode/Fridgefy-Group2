{"ast":null,"code":"import { collection, getDocs, query, doc, addDoc, deleteDoc, where } from \"firebase/firestore\";\nimport { dataBase } from './firebase_config'; //Check ref\n\nexport const recipeRef = collection(dataBase, 'recipes');\nexport const ingredientsRef = collection(dataBase, 'ingredients');\nconsole.log(recipeRef);\nconsole.log(ingredientsRef); //Get query snapshot\n\nexport const recipeQuerySnapShot = () => {\n  getDocs(recipeRef).then(QuerySnapshot => {\n    QuerySnapshot.docs.forEach(doc => console.log(doc.data()));\n  });\n};\nexport const dataBaseService = {\n  add: async newRecipe => {\n    const res = await addDoc(recipeRef, newRecipe);\n    console.log(res);\n    return res;\n  },\n  get: async userId => {\n    console.log('userId', userId);\n    const res = await getDocs(recipeRef);\n    console.log('getting', res);\n\n    if (!userId) {\n      return res;\n    }\n\n    ;\n    const recipesFilteredByUserId = query(recipeRef, where('userId', '==', userId));\n    return await getDocs(recipesFilteredByUserId);\n  },\n  delete: async name => {\n    const docRef = collection(dataBase, 'recipes');\n    const deleteQuery = query(docRef, where('title', '==', name));\n    const querySnapshot = await getDocs(deleteQuery);\n    querySnapshot.forEach(async document => {\n      const deleteTarget = doc(dataBase, 'recipes', document.id);\n      console.log('Target', document);\n      await deleteDoc(deleteTarget);\n    });\n  },\n  addIngredient: async newIngredient => {\n    const res = await addDoc(ingredientsRef, newIngredient);\n    console.log(res);\n    return res;\n  },\n  deleteIngredient: async ingredientName => {\n    console.log(ingredientName);\n    const docRef = collection(dataBase, 'ingredients');\n    const deleteQuery = query(docRef, where('name', '==', ingredientName));\n    const querySnapshot = await getDocs(deleteQuery);\n    querySnapshot.forEach(async document => {\n      const deleteTarget = doc(dataBase, 'ingredients', document.id);\n      console.log('Target', document);\n      await deleteDoc(deleteTarget);\n    });\n  },\n  getIngredient: async userId => {\n    console.log('userId', userId);\n    const res = await getDocs(ingredientsRef);\n    console.log('getting', res);\n\n    if (!userId) {\n      return res;\n    }\n\n    ;\n    const ingredientsFilteredByUserId = query(ingredientsRef, where('userId', '==', userId));\n    return await getDocs(ingredientsFilteredByUserId);\n  }\n};","map":{"version":3,"names":["collection","getDocs","query","doc","addDoc","deleteDoc","where","dataBase","recipeRef","ingredientsRef","console","log","recipeQuerySnapShot","then","QuerySnapshot","docs","forEach","data","dataBaseService","add","newRecipe","res","get","userId","recipesFilteredByUserId","delete","name","docRef","deleteQuery","querySnapshot","document","deleteTarget","id","addIngredient","newIngredient","deleteIngredient","ingredientName","getIngredient","ingredientsFilteredByUserId"],"sources":["C:/Users/nicki/Desktop/Web development/React-Proyect/Fridgefy-Group2/src/Backend/FirebaseUtils.js"],"sourcesContent":["import { collection, getDocs, query, doc, addDoc, deleteDoc, where } from \"firebase/firestore\";\r\nimport { dataBase } from './firebase_config'\r\n\r\n//Check ref\r\nexport const recipeRef = collection(dataBase, 'recipes')\r\nexport const ingredientsRef = collection(dataBase, 'ingredients')\r\nconsole.log(recipeRef)\r\nconsole.log(ingredientsRef)\r\n\r\n//Get query snapshot\r\nexport const recipeQuerySnapShot = () =>{\r\n    getDocs(recipeRef).then((QuerySnapshot) =>{\r\n        QuerySnapshot.docs.forEach((doc) => console.log(doc.data()))\r\n    })\r\n}\r\n\r\nexport const dataBaseService = {\r\n    add: async (newRecipe) =>{\r\n        const res = await addDoc(recipeRef, newRecipe);\r\n        console.log(res)\r\n        return res\r\n    },\r\n    get: async (userId) =>{\r\n        console.log('userId', userId);\r\n        const res = await getDocs(recipeRef);\r\n        console.log('getting',res);\r\n        if(!userId){\r\n            return res;\r\n        };\r\n        const recipesFilteredByUserId = query(recipeRef, where('userId', '==', userId));\r\n        return await getDocs(recipesFilteredByUserId);\r\n    },\r\n    delete: async (name) =>{\r\n        const docRef = collection(dataBase, 'recipes');\r\n        const deleteQuery = query(docRef, where('title', '==', name));\r\n        const querySnapshot = await getDocs(deleteQuery);\r\n        querySnapshot.forEach(async(document) =>{\r\n            const deleteTarget = doc(dataBase, 'recipes', document.id);\r\n            console.log('Target', document)\r\n            await deleteDoc(deleteTarget)\r\n        })\r\n    },\r\n    addIngredient: async (newIngredient) =>{\r\n        const res = await addDoc(ingredientsRef, newIngredient);\r\n        console.log(res);\r\n        return res;\r\n    },\r\n    deleteIngredient: async (ingredientName) =>{\r\n        console.log(ingredientName);\r\n        const docRef = collection(dataBase, 'ingredients');\r\n        const deleteQuery = query(docRef, where('name', '==', ingredientName));\r\n        const querySnapshot = await getDocs(deleteQuery);\r\n        querySnapshot.forEach(async(document) =>{\r\n            const deleteTarget = doc(dataBase, 'ingredients', document.id)\r\n            console.log('Target', document)\r\n            await deleteDoc(deleteTarget)\r\n        })\r\n\r\n    },\r\n    getIngredient: async (userId) =>{\r\n        console.log('userId', userId);\r\n        const res = await getDocs(ingredientsRef);\r\n        console.log('getting',res);\r\n        if(!userId){\r\n            return res;\r\n        };\r\n        const ingredientsFilteredByUserId = query(ingredientsRef, where('userId', '==', userId));\r\n        return await getDocs(ingredientsFilteredByUserId);\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}